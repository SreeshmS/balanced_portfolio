{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Balanced Portfolio</title>
    <link rel="stylesheet" href="{% static 'vendors/mdi/css/materialdesignicons.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Cedarville Cursive' rel='stylesheet'>
  </head>
  <body>
    <div class="container-scroller">
      <div class="container-fluid page-body-wrapper" style="width:100% !important;">
        <div class="main-panel" style="padding-top:15px !important;">
          <nav class="navbar navbar-expand-lg navbar-dark " style="left:0px !important;padding-top:0px !important;padding-bottom:0px !important;">
              <div class="container-fluid">
                  <a href="#" class="navbar-brand"><img src="./static/images/cglogo.png" alt=""></a>
                  <a href="portfolio" class="navbar-brand" style="font-family: 'Cedarville Cursive';">Balanced Portfolio</a>
                  <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                      <span class="navbar-toggler-icon"></span>
                  </button>
                  <div class="collapse navbar-collapse" id="navbarCollapse">
                      <div class="navbar-nav">
                          <a href="portfolio" class="nav-item nav-link active">
                          <span class="menu-icon">
                              <i class="mdi mdi-speedometer" style="color: #00d25b;"></i>
                          </span>
                          <b><span class="menu-title">Portfolio Dashboard</b>
                          </a>
                          <a href="equity" class="nav-item nav-link">
                          <span class="menu-icon">
                              <i class="mdi mdi-ballot" style="color: #0090e7;"></i>
                          </span>
                          <b><span class="menu-title">Equity Class</b>
                          </a>
                          <a href="bond" class="nav-item nav-link">
                          <span class="menu-icon">
                              <i class="mdi mdi-dip-switch" style="color: #ffab00;"></i>
                          </span>
                          <b><span class="menu-title">Fixed Income Securities</b>
                          </a>
                      </div>
                  </div>
              </div>
          </nav>

          <div class="content-wrapper">
            <div class="row">
              <h4 style="padding-bottom:15px; !important;">
              <span class="menu-icon">
                  <i class="mdi mdi-speedometer" style="color: #00d25b;"></i>
              </span>
              <b><span class="menu-title">Portfolio Dashboard</b>
              </h4>
              <div class="col-md-3">
                <div class="row">
                  <div class="col-md-12 grid-margin stretch-card">
                    <div class="card" style="height:93vh;">
                      <div class="card-body">
                        <h4 class="card-title text-center">Allocations</h4>
                        <div style="overflow: auto; height: 200px;">
                        <table class="table" style="width:100%;border:2px solid #191c24;background-color:#36454F;">
                          <tr>
                            <td style="position: sticky; top: 0;width:70%;border:2px solid #191c24;color:#FFA500;background:#36454F;"><b>Asset</b></td>
                            <td style="position: sticky; top: 0;border:2px solid #191c24;color:#FFA500;background:#36454F;"><b>Weight (%)</b></td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>AAPL</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="aapl">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#055C9D;color:#EBEBB8;"><b>CVM</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="cvm">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>F</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="fb">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>TSLA</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="ts">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>US10Y</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="uten">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>US5Y</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="ufive">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>US1Y</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="uone">
                            </td>
                          </tr>
<!--                          <tr>-->
<!--                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>EU10Y</b></td>-->
<!--                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">-->
<!--                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="eten">-->
<!--                            </td>-->
<!--                          </tr>-->
<!--                          <tr>-->
<!--                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>UK1Y</b></td>-->
<!--                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">-->
<!--                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="kone">-->
<!--                            </td>-->
<!--                          </tr>-->
<!--                          <tr>-->
<!--                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>UK30Y</b></td>-->
<!--                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">-->
<!--                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value" id="kth">-->
<!--                            </td>-->
<!--                          </tr>-->
                        </table>
                       </div>
                        <div class="template-demo text-center">
                          <button type="button" class="btn btn-inverse-warning btn-fw" style="min-width:20px;" onclick="myFunction()">Calculate<span class="caret"></span></button>
                        </div>
                        <br>
                        <table class="table" style="width:100%;border:2px solid #191c24;background-color:#36454F;">
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>Initial Investment</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value">
                            </td>
                          </tr>
                        </table>
                        <br>
                        <h4 class="text-center">Risk Tolerance</h4>
                        <table class="table" style="width:100%;border:2px solid #191c24;background-color:#36454F;">
<!--                          <tr>-->
<!--                            <td style="width:70%;border:2px solid #191c24;color:#FFA500;background-color:#191c24;"><b></b></td>-->
<!--                            <td style="border:2px solid #191c24;color:#191c24;background-color:#191c24;"><b>Weight (%)</b></td>-->
<!--                          </tr>-->
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>Confidence Interval</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                              <input type="text" style="background-color:#36454F;width:90%;border:none;" placeholder="enter value">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#EBEBB8;"><b>VaR @ 5%</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                            </td>
                          </tr>
                          <tr>
                            <td style="border:2px solid #191c24;color:#055C9D;color:#EBEBB8;"><b>Expected Shortfall</b></td>
                            <td style="border:2px solid #191c24;text-align:right;color:#EBEBB8;padding:0px;">
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="row">
                  <div class="col-md-12 grid-margin stretch-card">
                    <div class="card" style="height:93vh;">
                      <div class="card-body">
                        <h4 class="card-title text-center">Efficient Frontier Portfolios</h4>
                        <img src="/../static/files/efp.png" alt="" style="height:500px;width:650px;">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                <div class="card" style="height:45vh;margin-bottom:3vh;">
                  <div class="card-body">
                    <h4 class="card-title text-center">Allocation</h4>
                    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
                    <div id="piechart" style="width: 400px; height: 100px;"></div>
                  </div>
                </div>
                <div class="card" style="height:45vh;">
                  <div class="card-body">
                    <h4 class="card-title text-center">Value at Risk</h4>
                      <iframe src="/../static/files/var.html" style="height:200px;width:275px;" scrolling="no" frameborder="0"></iframe>
<!--                      <iframe src="http://127.0.0.1:8000/static/files/var.html" style="height:200px;width:275px;" scrolling="no" frameborder="0"></iframe>-->
                  </div>
                </div>
              </div>
            </div>
            <!-- content-wrapper ends -->
          </div>

          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted d-block text-center text-sm-left d-sm-inline-block">BALANCED PORTFOLIO</span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">All rights reserved by Capgemini. Copyright Â© 2022</span>
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>

    <script>


    function callFunction (){

              google.charts.load('current', {'packages':['corechart']});
          google.charts.setOnLoadCallback(draawChart);

      function draawChart() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Pizza');
      data.addColumn('number', 'Populartiy');
      data.addRows(
       [['Default', 100]]
      );

        var options = {
            backgroundColor: '#191c24',
            'width': 320,
            'height': 250,
            'chartArea': {'width': '100%', 'height': '80%'},
            legend: {textStyle: {color: 'white'}}
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
      }

callFunction()


    function myFunction() {
      pieArr = []
      aapl = []
      cvm = []
      fb = []
      tsla = []
      a = document.getElementById("aapl").value
      b = document.getElementById("cvm").value
      c = document.getElementById("fb").value
      d = document.getElementById("ts").value

            aapl.push('AAPL')
      aapl.push(parseInt(a))

      cvm.push('CVM')
      cvm.push(parseInt(b))

      fb.push('FB')
      fb.push(parseInt(c))

      tsla.push('TSLA')
      tsla.push(parseInt(d))

      pieArr.push(aapl)
      pieArr.push(cvm)
      pieArr.push(fb)
      pieArr.push(tsla)


      let sum = 0;
        pieArrTot = []
        for (let i = 0; i < pieArr.length; i++) {
            if (Number.isNaN(pieArr[i][1]) != true){
            console.log('number')
                sum += Number(pieArr[i][1]);
                       console.log(sum)
            }
        pieArrTot.push(i[0])
        pieArrTot.push(i[1])
        }

      if (sum == 100){
            console.log(pieArr)
          pieArrTot = pieArr
          google.charts.load('current', {'packages':['corechart']});
          google.charts.setOnLoadCallback(drawChart);
      } if (sum < 100) {
                pieArrTot = pieArr
                      console.log(pieArrTot)

        google.charts.load('current', {'packages':['corechart']});
          google.charts.setOnLoadCallback(drawChart);
      }

    }

      function drawChart() {
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Pizza');
      data.addColumn('number', 'Populartiy');
      data.addRows(
       pieArrTot
      );

        var options = {
            backgroundColor: '#191c24',
            'width': 320,
            'height': 250,
            'chartArea': {'width': '100%', 'height': '80%'},
            legend: {textStyle: {color: 'white'}}
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
    </script>

  </body>
</html>